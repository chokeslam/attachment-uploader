{"version":3,"file":"attachment.js","names":["initAttachmentList","el","removeBtns","querySelectorAll","insertBtns","forEach","btn","addEventListener","e","a","document","createElement","href","currentTarget","dataset","fileName","filename","setAttribute","innerText","u","$ui","tinymce","get","insertBtn","insert","outerHTML","tr","closest","querySelector","removeAttribute","fadeOut","directive","mounted","bindings"],"sources":["attachment.js"],"sourcesContent":["/**\n * Part of earth project.\n *\n * @copyright  Copyright (C) 2022 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nimport '@main';\n\nu.directive(\n  'attachment-list',\n  {\n    mounted(el, bindings) {\n      initAttachmentList(el);\n    }\n  }\n);\n\nfunction initAttachmentList(el) {\n  const removeBtns = el.querySelectorAll('[data-remove-btn]');\n  const insertBtns = el.querySelectorAll('[data-insert-btn]');\n\n  // insert to editor\n  insertBtns.forEach((btn) => {\n    btn.addEventListener('click', (e) => {\n      let a = document.createElement('a');\n      const href = e.currentTarget.dataset.href;\n      const fileName = e.currentTarget.dataset.filename;\n\n      a.setAttribute('target', '_blank');\n      a.setAttribute('href', href);\n      a.innerText = fileName;\n\n      u.$ui.tinymce.get(btn.dataset.insertBtn || '#input-item-fulltext').insert(a.outerHTML);\n    });\n  });\n\n  // remove file\n  removeBtns.forEach((btn) => {\n    btn.addEventListener('click', (e) => {\n      let tr = e.currentTarget.closest('tr');\n\n      tr.querySelector('[data-remove]').removeAttribute('disabled');\n\n      u.$ui.fadeOut(tr);\n    });\n  });\n}\n"],"mappings":";;;EAkBA,SAASA,kBAAT,CAA4BC,EAA5B,EAAgC;IAC9B,IAAMC,UAAU,GAAGD,EAAE,CAACE,gBAAH,CAAoB,mBAApB,CAAnB;IACA,IAAMC,UAAU,GAAGH,EAAE,CAACE,gBAAH,CAAoB,mBAApB,CAAnB,CAF8B,CAI9B;;IACAC,UAAU,CAACC,OAAX,CAAmB,UAACC,GAAD,EAAS;MAC1BA,GAAG,CAACC,gBAAJ,CAAqB,OAArB,EAA8B,UAACC,CAAD,EAAO;QACnC,IAAIC,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR;QACA,IAAMC,IAAI,GAAGJ,CAAC,CAACK,aAAF,CAAgBC,OAAhB,CAAwBF,IAArC;QACA,IAAMG,QAAQ,GAAGP,CAAC,CAACK,aAAF,CAAgBC,OAAhB,CAAwBE,QAAzC;QAEAP,CAAC,CAACQ,YAAF,CAAe,QAAf,EAAyB,QAAzB;QACAR,CAAC,CAACQ,YAAF,CAAe,MAAf,EAAuBL,IAAvB;QACAH,CAAC,CAACS,SAAF,GAAcH,QAAd;QAEAI,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAcC,GAAd,CAAkBhB,GAAG,CAACQ,OAAJ,CAAYS,SAAZ,IAAyB,sBAA3C,EAAmEC,MAAnE,CAA0Ef,CAAC,CAACgB,SAA5E;MACD,CAVD;IAWD,CAZD,EAL8B,CAmB9B;;IACAvB,UAAU,CAACG,OAAX,CAAmB,UAACC,GAAD,EAAS;MAC1BA,GAAG,CAACC,gBAAJ,CAAqB,OAArB,EAA8B,UAACC,CAAD,EAAO;QACnC,IAAIkB,EAAE,GAAGlB,CAAC,CAACK,aAAF,CAAgBc,OAAhB,CAAwB,IAAxB,CAAT;QAEAD,EAAE,CAACE,aAAH,CAAiB,eAAjB,EAAkCC,eAAlC,CAAkD,UAAlD;QAEAV,CAAC,CAACC,GAAF,CAAMU,OAAN,CAAcJ,EAAd;MACD,CAND;IAOD,CARD;EASD;;;;;MA/CD;AACA;AACA;AACA;AACA;AACA;MAIAP,CAAC,CAACY,SAAF,CACE,iBADF,EAEE;QACEC,OADF,mBACU/B,EADV,EACcgC,QADd,EACwB;UACpBjC,kBAAkB,CAACC,EAAD,CAAlB;QACD;MAHH,CAFF"}